"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[637],{5637:(Z,m,i)=>{i.r(m),i.d(m,{AuthModule:()=>C});var d=i(6814),a=i(1730),t=i(95),p=i(8645),g=i(9773),e=i(9468),c=i(3476),u=i(1064),f=i(6689);const h=function(s){return{box:s}},b=[{path:"",children:[{path:"",redirectTo:"signIn",pathMatch:"full"},{path:"signIn",component:(()=>{class s{constructor(n,o,r,l,y){this._fb=n,this._authService=o,this._ngToaster=r,this._router=l,this._communicationService=y,this.role="",this.isSubmitted=!1,this.passwordVisibilty=!1,this.loginForm=new t.cw({}),this._ngUnsbscribe=new p.x}ngOnInit(){this.loginForm=this._fb.group({email:["",[t.kI.required,t.kI.pattern(/^[\w\.-]+@[a-zA-Z\d\.-]+\.[a-zA-Z]{2,}$/)]],password:["",[t.kI.required,t.kI.pattern(/^.{4,}$/)]]})}get formControls(){return this.loginForm.controls}selectRole(n){this.role=n}showPassword(){this.passwordVisibilty=!this.passwordVisibilty}onSubmit(){if(this.isSubmitted=!0,!this.loginForm.valid)return;if(!this.role)return void this._ngToaster.error({position:"topCenter",duration:2e3,detail:"Please select the role"});const n=this.loginForm.getRawValue();n.role=this.role,this._authService.userLogin(n).pipe((0,g.R)(this._ngUnsbscribe)).subscribe(o=>{o.success?(this._ngToaster.success({position:"topCenter",duration:2e3,detail:o.message}),localStorage.setItem("accessToken",o.accessToken),localStorage.setItem("refreshToken",o.refreshToken),"user"==this.role&&(console.log("requested connection"),this._communicationService.online(o._id)),this._router.navigate([`/${this.role}/home`])):this._ngToaster.error({position:"topCenter",duration:2e3,detail:o.message})})}ngOnDestroy(){this._ngUnsbscribe.next(),this._ngUnsbscribe.complete()}static#e=this.\u0275fac=function(o){return new(o||s)(e.Y36(t.qu),e.Y36(c.e),e.Y36(u.s),e.Y36(a.F0),e.Y36(f.O))};static#r=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-sign-in"]],decls:33,vars:16,consts:[[1,"bg-gray-50","min-h-screen","flex","items-center","justify-center"],[1,"bg-gray-100","flex","rounded-2xl","shadow-lg","max-w-3xl","p-5"],[1,"sm:w-1/2","sm:px-8"],[1,"font-bold","text-2xl"],[1,"flex","flex-col","gap-3",3,"formGroup","ngSubmit"],[1,"mt-8","text-gray-400","text-sm"],["type","text","formControlName","email","placeholder","example@gmail.com",1,"p-2","rounded-xl","border"],[1,"mt-3","text-gray-400","text-sm"],[1,"relative"],["type","password","placeholder","Password@123","formControlName","password",1,"w-full","p-2","rounded-xl","border",3,"type"],[1,"absolute","top-1/2","right-3","-translate-y-1/2","text-gray-500","cursor-pointer",3,"ngClass","click"],[1,"flex","items-center","gap-8","justify-around","mt-4"],["type","button",1,"bb","sm:h-8","h-6","sm:w-1/2","w-1/2",3,"ngClass","click"],[1,"font-bold","text-center","text-sm"],[1,"font-bold","text-center","sm:text-sm","text-xs"],[1,"bg-[#002D74]","text-white","rounded-xl","py-2","hover:scale-105","duration-300","mt-4"],[1,"mt-4","text-gray-400","items-center","justify-center"],[1,"border-gray-400"],[1,"mt-4","text-xs","flex","justify-between","items-center"],["type","button",1,"py-2","px-4","rounded-xl","border","hover:scale-110","duration-300","bg-white",3,"routerLink"],[1,"w-1/2","sm:block","hidden"],["src","./../../../../assets/images/login.jpeg","alt","",1,"rounded-2xl","min-h-[534px]"]],template:function(o,r){1&o&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Login"),e.qZA(),e.TgZ(5,"form",4),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(6,"label",5),e._uU(7),e.qZA(),e._UZ(8,"input",6),e.TgZ(9,"div")(10,"label",7),e._uU(11),e.qZA()(),e.TgZ(12,"div",8),e._UZ(13,"input",9),e.TgZ(14,"i",10),e.NdJ("click",function(){return r.showPassword()}),e.qZA()(),e.TgZ(15,"div",11)(16,"button",12),e.NdJ("click",function(){return r.selectRole("user")}),e.TgZ(17,"h3",13),e._uU(18,"USER"),e.qZA()(),e.TgZ(19,"button",12),e.NdJ("click",function(){return r.selectRole("admin")}),e.TgZ(20,"h3",14),e._uU(21,"ADMIN"),e.qZA()()(),e.TgZ(22,"button",15),e._uU(23," Login "),e.qZA()(),e.TgZ(24,"div",16),e._UZ(25,"hr",17),e.qZA(),e.TgZ(26,"div",18)(27,"p"),e._uU(28,"If you don't have account"),e.qZA(),e.TgZ(29,"button",19),e._uU(30," Register "),e.qZA()()(),e.TgZ(31,"div",20),e._UZ(32,"img",21),e.qZA()()()),2&o&&(e.xp6(5),e.Q6J("formGroup",r.loginForm),e.xp6(1),e.Udp("color",r.isSubmitted&&r.formControls.email.errors?"red":""),e.xp6(1),e.Oqu(r.isSubmitted&&null!=r.formControls.email.errors&&r.formControls.email.errors.hasOwnProperty("required")?"Email required":r.isSubmitted&&null!=r.formControls.email.errors&&r.formControls.email.errors.hasOwnProperty("pattern")?"Invalid email":"Email"),e.xp6(3),e.Udp("color",r.isSubmitted&&r.formControls.password.errors?"red":""),e.xp6(1),e.Oqu(r.isSubmitted&&null!=r.formControls.password.errors&&r.formControls.password.errors.hasOwnProperty("required")?"Password required":r.isSubmitted&&null!=r.formControls.password.errors&&r.formControls.password.errors.hasOwnProperty("pattern")?"Minimun 4 characters required":"Password"),e.xp6(2),e.Q6J("type",r.passwordVisibilty?"text":"password"),e.xp6(1),e.Q6J("ngClass",r.passwordVisibilty?"bi bi-eye-slash":"bi bi-eye"),e.xp6(2),e.Q6J("ngClass",e.VKq(12,h,"user"===r.role)),e.xp6(3),e.Q6J("ngClass",e.VKq(14,h,"admin"===r.role)),e.xp6(10),e.Q6J("routerLink","../signUp"))},dependencies:[d.mk,a.rH,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u],styles:['.box[_ngcontent-%COMP%]{position:relative;background-color:#000000b3;display:flex;justify-content:center;align-items:center;overflow:hidden;border-radius:6px}.box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;z-index:1}.box[_ngcontent-%COMP%]:before{content:"";position:absolute;width:20px;height:405%;background:linear-gradient(#00ccff,#d500f9);animation:_ngcontent-%COMP%_rotate 4s linear infinite}.box[_ngcontent-%COMP%]:after{content:"";position:absolute;background:#0e1538;inset:3px;border-radius:6px}@keyframes _ngcontent-%COMP%_rotate{0%{rotate:0deg}to{rotate:360deg}}.bb[_ngcontent-%COMP%]{position:relative;background:#161e4b;display:flex;justify-content:center;align-items:center;overflow:hidden;color:#fff;border-radius:6px}.bb[_ngcontent-%COMP%]:hover{scale:1.15;transition:.4s ease-in-out}@media screen and (max-width: 768px){.box[_ngcontent-%COMP%]:before{width:16px}.box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .bb[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:10px}}']})}return s})()},{path:"signUp",component:(()=>{class s{constructor(n,o,r,l){this._fb=n,this._authService=o,this._ngToaster=r,this._router=l,this.isSubmitted=!1,this.registerForm=new t.cw({}),this._ngUnsbscribe=new p.x}ngOnInit(){this.registerForm=this._fb.group({name:["",[t.kI.required]],email:["",[t.kI.required,t.kI.pattern(/^[\w\.-]+@[a-zA-Z\d\.-]+\.[a-zA-Z]{2,}$/)]],password:["",[t.kI.required,t.kI.pattern(/^.{4,}$/)]],confirmPassword:["",[t.kI.required]]})}get formControls(){return this.registerForm.controls}onSubmit(){if(this.isSubmitted=!0,!this.registerForm.valid)return;if(this.registerForm.get("password")?.value!=this.registerForm.get("confirmPassword")?.value)return void this.registerForm.get("confirmPassword")?.setErrors({match:!0});const n=this.registerForm.getRawValue();this._authService.userRegister(n).pipe((0,g.R)(this._ngUnsbscribe)).subscribe(o=>{this._ngToaster.success({position:"topCenter",duration:2e3,detail:o.message}),this._router.navigate(["../"])})}ngOnDestroy(){this._ngUnsbscribe.next(),this._ngUnsbscribe.complete()}static#e=this.\u0275fac=function(o){return new(o||s)(e.Y36(t.qu),e.Y36(c.e),e.Y36(u.s),e.Y36(a.F0))};static#r=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-sign-up"]],decls:29,vars:14,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50"],[1,"flex","max-w-3xl","p-5","shadow-lg","bg-gray-100","rounded-2xl"],[1,"w-1/2","sm:block","hidden"],["src","../../../../assets/images/signUp.jpeg","alt","",1,"rounded-2xl","object-fill","min-h-[534px]"],[1,"sm:w-1/2","sm:px-10"],[1,"font-bold","text-2xl"],[1,"flex","flex-col","gap-3","text-sm",3,"formGroup","ngSubmit"],[1,"mt-3","text-gray-400","text-sm"],["type","text","formControlName","name","placeholder","Jhon Lops",1,"rounded-xl","p-2"],[1,"mt-1","text-gray-400","text-sm"],["type","email","formControlName","email","placeholder","example@gmail.com",1,"rounded-xl","p-2"],["type","text","formControlName","password","placeholder","Password@123",1,"p-2","rounded-xl"],["type","password","formControlName","confirmPassword","placeholder","Password@123",1,"p-2","rounded-xl"],[1,"bg-[#002D74]","text-white","rounded-xl","py-2","mt-3","hover:scale-105","duration-300"],[1,"mt-4","text-gray-400","items-center","justify-center"],[1,"border-gray-400"],[1,"flex","text-xs","mt-3","justify-between","items-center"],[1,"py-2","px-8","border","rounded-xl","text-xs","hover:scale-110","duration-300",3,"routerLink"]],template:function(o,r){1&o&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"h2",5),e._uU(6,"Register"),e.qZA(),e.TgZ(7,"form",6),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(8,"label",7),e._uU(9),e.qZA(),e._UZ(10,"input",8),e.TgZ(11,"label",9),e._uU(12),e.qZA(),e._UZ(13,"input",10),e.TgZ(14,"label",9),e._uU(15),e.qZA(),e._UZ(16,"input",11),e.TgZ(17,"label",9),e._uU(18),e.qZA(),e._UZ(19,"input",12),e.TgZ(20,"button",13),e._uU(21," Register "),e.qZA()(),e.TgZ(22,"div",14),e._UZ(23,"hr",15),e.qZA(),e.TgZ(24,"div",16)(25,"p"),e._uU(26,"If you have account"),e.qZA(),e.TgZ(27,"button",17),e._uU(28," Login "),e.qZA()()()()()),2&o&&(e.xp6(7),e.Q6J("formGroup",r.registerForm),e.xp6(1),e.Udp("color",r.isSubmitted&&r.formControls.name.errors?"red":""),e.xp6(1),e.Oqu(r.isSubmitted&&null!=r.formControls.name.errors&&r.formControls.name.errors.hasOwnProperty("required")?"Name required":"Name"),e.xp6(2),e.Udp("color",r.isSubmitted&&r.formControls.email.errors?"red":""),e.xp6(1),e.Oqu(r.isSubmitted&&null!=r.formControls.email.errors&&r.formControls.email.errors.hasOwnProperty("required")?"Email required":r.isSubmitted&&null!=r.formControls.email.errors&&r.formControls.email.errors.hasOwnProperty("pattern")?"Invalid email":"Email"),e.xp6(2),e.Udp("color",r.isSubmitted&&r.formControls.password.errors?"red":""),e.xp6(1),e.Oqu(r.isSubmitted&&null!=r.formControls.password.errors&&r.formControls.password.errors.hasOwnProperty("required")?"Password required":r.isSubmitted&&null!=r.formControls.password.errors&&r.formControls.password.errors.hasOwnProperty("pattern")?"Minimun 4 characters required":"Password"),e.xp6(2),e.Udp("color",r.isSubmitted&&r.formControls.confirmPassword.errors?"red":""),e.xp6(1),e.Oqu(r.isSubmitted&&null!=r.formControls.confirmPassword.errors&&r.formControls.confirmPassword.errors.hasOwnProperty("required")?"Confirm password required":r.isSubmitted&&null!=r.formControls.confirmPassword.errors&&r.formControls.confirmPassword.errors.hasOwnProperty("match")?"Password not matching":"Confirm password"),e.xp6(9),e.Q6J("routerLink","../signIn"))},dependencies:[a.rH,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u]})}return s})()}]}];let w=(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#r=this.\u0275mod=e.oAB({type:s});static#t=this.\u0275inj=e.cJS({imports:[a.Bz.forChild(b),a.Bz]})}return s})(),C=(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#r=this.\u0275mod=e.oAB({type:s});static#t=this.\u0275inj=e.cJS({imports:[d.ez,w,t.u5,t.UX,u.XF]})}return s})()}}]);